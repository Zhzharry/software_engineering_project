# 前端待实现功能清单

根据后端API接口分析，前端目前缺少以下功能模块：

## 📊 1. 仪表板（Dashboard）页面 ⚠️ **完全缺失**

### 后端接口
- `GET /api/dashboard` - 获取仪表板数据
- `GET /api/dashboard/statistics` - 获取数据统计
- `GET /api/dashboard/files` - 获取文件统计
- `GET /api/dashboard/activities` - 获取最近活动
- `GET /api/dashboard/charts` - 获取图表数据
- `GET /api/dashboard/charts/data-type-distribution` - 获取数据类型分布（饼图）
- `GET /api/dashboard/charts/trend?days=7` - 获取数据趋势（折线图）

### 需要实现
1. **创建 `Dashboard.vue` 页面**
   - 显示系统概览统计（数据总数、文件总数、用户总数等）
   - 显示数据统计卡片
   - 显示文件统计信息
   - 显示最近活动列表
   - 集成图表组件（建议使用 ECharts 或 Chart.js）
     - 数据类型分布饼图
     - 数据趋势折线图（支持选择时间范围：7天、30天、90天）

2. **在 `api/index.js` 中添加 Dashboard API**
   ```javascript
   export const dashboardAPI = {
     getDashboard: () => api.get('/dashboard'),
     getStatistics: () => api.get('/dashboard/statistics'),
     getFileStatistics: () => api.get('/dashboard/files'),
     getRecentActivities: () => api.get('/dashboard/activities'),
     getChartData: () => api.get('/dashboard/charts'),
     getDataTypeDistribution: () => api.get('/dashboard/charts/data-type-distribution'),
     getTrendChart: (days = 7) => api.get(`/dashboard/charts/trend?days=${days}`)
   }
   ```

3. **在 `router/index.js` 中添加路由**
   ```javascript
   {
     path: '/dashboard',
     name: 'Dashboard',
     component: Dashboard
   }
   ```

4. **在 `App.vue` 中添加导航链接**
   - 建议将 Dashboard 作为首页，放在导航栏最前面

---

## 🗑️ 2. 数据清理（Data Eviction）功能 ⚠️ **完全缺失**

### 后端接口
- `POST /api/data-eviction/raw-data` - 清理过期的原始数据
- `POST /api/data-eviction/processed-data` - 清理过期的处理数据
- `POST /api/data-eviction/all` - 清理所有过期数据
- `POST /api/data-eviction/strategy/{dataType}` - 按策略清理指定类型数据

### 需要实现
1. **创建 `DataEviction.vue` 页面** 或 **在现有页面中添加数据清理功能**
   - 显示数据清理操作面板
   - 提供清理按钮：
     - 清理过期原始数据
     - 清理过期处理数据
     - 清理所有过期数据
     - 按数据类型清理（需要选择数据类型）
   - 显示清理结果（清理了多少条数据）
   - 添加确认对话框，防止误操作

2. **在 `api/index.js` 中添加 Data Eviction API**
   ```javascript
   export const dataEvictionAPI = {
     evictRawData: () => api.post('/data-eviction/raw-data'),
     evictProcessedData: () => api.post('/data-eviction/processed-data'),
     evictAll: () => api.post('/data-eviction/all'),
     evictByStrategy: (dataType) => api.post(`/data-eviction/strategy/${dataType}`)
   }
   ```

3. **在 `router/index.js` 中添加路由**
   ```javascript
   {
     path: '/data-eviction',
     name: 'DataEviction',
     component: DataEviction
   }
   ```

4. **在 `App.vue` 中添加导航链接**

---

## 📁 3. 文件管理（File Management）页面 ⚠️ **完全缺失**

### 后端接口
- `POST /api/files/upload` - 上传文件（multipart/form-data）
- `GET /api/files` - 获取所有文件
- `GET /api/files/{id}` - 获取文件详情
- `GET /api/files/type/{fileType}` - 按类型获取文件
- `GET /api/files/related?relatedDataId=xxx&relatedDataType=xxx` - 获取关联数据文件
- `GET /api/files/user/{userId}` - 获取用户文件
- `DELETE /api/files/{id}` - 删除文件
- `PUT /api/files/{id}` - 更新文件信息
- `GET /api/files/{id}/download` - 下载文件
- `GET /api/files/{id}/preview` - 预览文件
- `GET /api/files/{id}/url` - 获取文件URL
- `GET /api/files/statistics` - 获取文件统计

### 需要实现
1. **创建 `FileManagement.vue` 页面**
   - 文件列表展示（表格形式）
     - 显示：文件名、文件类型、大小、上传时间、关联数据、操作按钮
   - 文件上传功能
     - 支持拖拽上传
     - 支持选择文件上传
     - 上传时需要填写：文件类型、关联数据ID（可选）、关联数据类型（可选）、用户ID（可选）、描述（可选）
   - 文件操作功能
     - 下载文件
     - 预览文件（支持图片、PDF等可预览类型）
     - 编辑文件信息（描述、访问级别）
     - 删除文件
   - 文件筛选功能
     - 按文件类型筛选
     - 按用户筛选
     - 按关联数据筛选
   - 显示文件统计信息

2. **在 `api/index.js` 中添加 File API**
   ```javascript
   export const fileAPI = {
     upload: (formData) => api.post('/files/upload', formData, {
       headers: { 'Content-Type': 'multipart/form-data' }
     }),
     getAll: () => api.get('/files'),
     getById: (id) => api.get(`/files/${id}`),
     getByType: (type) => api.get(`/files/type/${type}`),
     getByRelatedData: (relatedDataId, relatedDataType) => 
       api.get(`/files/related?relatedDataId=${relatedDataId}&relatedDataType=${relatedDataType}`),
     getUserFiles: (userId) => api.get(`/files/user/${userId}`),
     delete: (id) => api.delete(`/files/${id}`),
     update: (id, data) => api.put(`/files/${id}`, data),
     download: (id) => api.get(`/files/${id}/download`, { responseType: 'blob' }),
     preview: (id) => api.get(`/files/${id}/preview`, { responseType: 'blob' }),
     getUrl: (id) => api.get(`/files/${id}/url`),
     getStatistics: () => api.get('/files/statistics')
   }
   ```

3. **在 `router/index.js` 中添加路由**
   ```javascript
   {
     path: '/files',
     name: 'Files',
     component: FileManagement
   }
   ```

4. **在 `App.vue` 中添加导航链接**

---

## ⚙️ 4. 存储策略管理（Storage Strategy）页面 ⚠️ **完全缺失**

### 后端接口
- `POST /api/storage-strategy` - 创建存储策略
- `PUT /api/storage-strategy/{id}` - 更新存储策略
- `DELETE /api/storage-strategy/{id}` - 删除存储策略
- `GET /api/storage-strategy/{id}` - 获取策略详情
- `GET /api/storage-strategy` - 获取所有策略
- `GET /api/storage-strategy/data-type/{dataType}` - 按数据类型获取策略
- `GET /api/storage-strategy/active` - 获取激活的策略

### 需要实现
1. **创建 `StorageStrategyManagement.vue` 页面**
   - 存储策略列表展示
     - 显示：策略名称、数据类型、保留天数、是否激活、创建时间、操作按钮
   - 创建/编辑存储策略
     - 表单字段：策略名称、数据类型、保留天数、是否激活、描述等
   - 删除存储策略（需要确认）
   - 筛选功能
     - 按数据类型筛选
     - 只显示激活的策略

2. **在 `api/index.js` 中添加 Storage Strategy API**
   ```javascript
   export const storageStrategyAPI = {
     create: (strategy) => api.post('/storage-strategy', strategy),
     update: (id, strategy) => api.put(`/storage-strategy/${id}`, strategy),
     delete: (id) => api.delete(`/storage-strategy/${id}`),
     getById: (id) => api.get(`/storage-strategy/${id}`),
     getAll: () => api.get('/storage-strategy'),
     getByDataType: (dataType) => api.get(`/storage-strategy/data-type/${dataType}`),
     getActive: () => api.get('/storage-strategy/active')
   }
   ```

3. **在 `router/index.js` 中添加路由**
   ```javascript
   {
     path: '/storage-strategy',
     name: 'StorageStrategy',
     component: StorageStrategyManagement
   }
   ```

4. **在 `App.vue` 中添加导航链接**

---

## 📝 5. 现有页面功能完善建议

### 5.1 原始数据管理（RawDataManagement.vue）
- ✅ 已有基础功能
- 💡 建议增强：
  - 添加时间范围筛选功能（使用日期选择器）
  - 添加数据导出功能
  - 添加批量标记为已处理功能

### 5.2 日志数据管理（LogDataManagement.vue）
- ✅ 已有基础功能
- 💡 建议增强：
  - 添加日志级别筛选（已有API支持）
  - 添加时间范围筛选
  - 添加日志搜索功能
  - 添加日志导出功能

### 5.3 处理数据管理（ProcessedDataManagement.vue）
- ✅ 已有基础功能
- 💡 建议增强：
  - 添加置信度分数筛选（已有API支持）
  - 添加字段搜索功能（已有API支持）
  - 添加批量更新置信度功能

### 5.4 模块管理（ModuleManagement.vue）
- ✅ 已有基础功能
- 💡 建议增强：
  - 添加模块状态筛选（已有API支持）
  - 显示模块关联的原始数据数量
  - 添加模块数据统计

---

## 🎨 6. UI/UX 改进建议

1. **统一设计风格**
   - 确保所有页面使用一致的样式
   - 统一按钮、表格、表单的样式

2. **添加加载状态**
   - 所有API调用都应该显示加载状态
   - 使用骨架屏或加载动画

3. **错误处理**
   - 统一错误提示样式
   - 显示友好的错误信息

4. **响应式设计**
   - 确保在移动端也能正常使用
   - 表格在小屏幕上使用卡片布局

5. **数据分页**
   - 对于大量数据的列表，实现分页功能
   - 后端已支持分页（如用户、模块、日志数据）

---

## 📦 7. 依赖包建议

如果需要实现图表功能，建议安装：
```bash
npm install echarts vue-echarts
# 或
npm install chart.js vue-chartjs
```

如果需要日期选择器：
```bash
npm install vue-datepicker-next
# 或使用 Element Plus 的日期选择器
```



## 📌 总结

**必须实现的新页面（4个）：**
1. Dashboard.vue - 仪表板
2. FileManagement.vue - 文件管理
3. StorageStrategyManagement.vue - 存储策略管理
4. DataEviction.vue - 数据清理
