# API æ¥å£æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•è¯´æ˜

æœ¬æ–‡æ¡£åŒ…å«æ‰€æœ‰ REST API æ¥å£çš„æµ‹è¯•ç”¨ä¾‹ï¼Œæ¯ä¸ªæµ‹è¯•ç”¨ä¾‹åŒ…å«ï¼š
- **è¯·æ±‚è·¯å¾„**ï¼šå®Œæ•´çš„ API ç«¯ç‚¹
- **è¯·æ±‚æ–¹æ³•**ï¼šGET/POST/PUT/DELETE
- **è¯·æ±‚ä½“**ï¼šJSON æ ¼å¼çš„è¯·æ±‚æ•°æ®
- **æ•°æ®åº“éªŒè¯**ï¼šå¦‚ä½•åœ¨æ•°æ®åº“ä¸­æŸ¥çœ‹å¯¹åº”çš„å˜åŒ–

**æµ‹è¯•ç¯å¢ƒ**ï¼š
- åŸºç¡€ URL: `http://localhost:8080`
- MySQL æ•°æ®åº“: `zaiqing`
- MongoDB æ•°æ®åº“: `module_db`

---

## 1. ç”¨æˆ·ç®¡ç†æ¥å£ (UserController)

### 1.1 åˆ›å»ºç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `POST /api/users`

**è¯·æ±‚ä½“**:
```json
{
  "username": "testuser001",
  "email": "testuser001@example.com",
  "phone": "13800138001",
  "status": 1
}
```

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
-- åœ¨ MySQL ä¸­æŸ¥è¯¢
USE zaiqing;
SELECT * FROM user WHERE username = 'testuser001';

-- éªŒè¯å­—æ®µ
-- id: è‡ªåŠ¨ç”Ÿæˆçš„ID
-- username: 'testuser001'
-- email: 'testuser001@example.com'
-- phone: '13800138001'
-- status: 1
-- create_time: å½“å‰æ—¶é—´ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰
-- update_time: å½“å‰æ—¶é—´ï¼ˆè‡ªåŠ¨å¡«å……ï¼‰
```

---

### 1.2 æ ¹æ®IDæŸ¥è¯¢ç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `GET /api/users/{id}`

**ç¤ºä¾‹**: `GET /api/users/1`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
-- éªŒè¯è¿”å›çš„æ•°æ®ä¸æ•°æ®åº“ä¸€è‡´
SELECT * FROM user WHERE id = 1;
```

---

### 1.3 æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢ç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `GET /api/users/username/{username}`

**ç¤ºä¾‹**: `GET /api/users/username/testuser001`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM user WHERE username = 'testuser001';
```

---

### 1.4 æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `GET /api/users`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM user ORDER BY id;
```

---

### 1.5 åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `GET /api/users/page?page=0&size=10&sort=id`

**å‚æ•°è¯´æ˜**:
- `page`: é¡µç ï¼ˆä»0å¼€å§‹ï¼‰
- `size`: æ¯é¡µå¤§å°
- `sort`: æ’åºå­—æ®µ

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM user ORDER BY id LIMIT 0, 10;
```

---

### 1.6 æ›´æ–°ç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `PUT /api/users/{id}`

**ç¤ºä¾‹**: `PUT /api/users/1`

**è¯·æ±‚ä½“**:
```json
{
  "username": "testuser001",
  "email": "updated_email@example.com",
  "phone": "13900139001",
  "status": 0
}
```

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
-- æ‰§è¡Œæ›´æ–°åæŸ¥è¯¢
SELECT * FROM user WHERE id = 1;

-- éªŒè¯å­—æ®µå·²æ›´æ–°
-- email: 'updated_email@example.com'
-- phone: '13900139001'
-- status: 0
-- update_time: å·²æ›´æ–°ä¸ºå½“å‰æ—¶é—´
```

---

### 1.7 åˆ é™¤ç”¨æˆ·

**è¯·æ±‚è·¯å¾„**: `DELETE /api/users/{id}`

**ç¤ºä¾‹**: `DELETE /api/users/1`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
-- æ‰§è¡Œåˆ é™¤åæŸ¥è¯¢ï¼ˆåº”è¯¥æŸ¥ä¸åˆ°æ•°æ®ï¼‰
SELECT * FROM user WHERE id = 1;
```

---

### 1.8 æ£€æŸ¥ç”¨æˆ·åæ˜¯å¦å­˜åœ¨

**è¯·æ±‚è·¯å¾„**: `GET /api/users/check-username?username=testuser001`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT COUNT(*) FROM user WHERE username = 'testuser001';
-- å¦‚æœè¿”å› 0ï¼Œåˆ™ä¸å­˜åœ¨ï¼›è¿”å› 1ï¼Œåˆ™å­˜åœ¨
```

---

## 2. æ¨¡å—ç®¡ç†æ¥å£ (ModuleController)

### 2.1 åˆ›å»ºæ¨¡å—

**è¯·æ±‚è·¯å¾„**: `POST /api/modules`

**è¯·æ±‚ä½“**:
```json
{
  "name": "æ•°æ®æ¥å…¥æ¨¡å—",
  "description": "è´Ÿè´£ä»å¤šä¸ªæ•°æ®æºæ¥å…¥æ•°æ®",
  "status": 1
}
```

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
-- åœ¨ MySQL ä¸­æŸ¥è¯¢
USE zaiqing;
SELECT * FROM module_entity WHERE name = 'æ•°æ®æ¥å…¥æ¨¡å—';

-- éªŒè¯å­—æ®µ
-- id: è‡ªåŠ¨ç”Ÿæˆçš„ID
-- name: 'æ•°æ®æ¥å…¥æ¨¡å—'
-- description: 'è´Ÿè´£ä»å¤šä¸ªæ•°æ®æºæ¥å…¥æ•°æ®'
-- status: 1
-- create_time: å½“å‰æ—¶é—´
-- update_time: å½“å‰æ—¶é—´
```

---

### 2.2 æ ¹æ®IDæŸ¥è¯¢æ¨¡å—

**è¯·æ±‚è·¯å¾„**: `GET /api/modules/{id}`

**ç¤ºä¾‹**: `GET /api/modules/1`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM module_entity WHERE id = 1;
```

---

### 2.3 åˆ†é¡µæŸ¥è¯¢æ¨¡å—

**è¯·æ±‚è·¯å¾„**: `GET /api/modules?page=0&size=10&sort=id`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM module_entity ORDER BY id LIMIT 0, 10;
```

---

### 2.4 æ ¹æ®çŠ¶æ€æŸ¥è¯¢æ¨¡å—

**è¯·æ±‚è·¯å¾„**: `GET /api/modules/status/{status}`

**ç¤ºä¾‹**: `GET /api/modules/status/1`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM module_entity WHERE status = 1;
```

---

### 2.5 æ›´æ–°æ¨¡å—

**è¯·æ±‚è·¯å¾„**: `PUT /api/modules/{id}`

**ç¤ºä¾‹**: `PUT /api/modules/1`

**è¯·æ±‚ä½“**:
```json
{
  "name": "æ•°æ®æ¥å…¥æ¨¡å—ï¼ˆå·²æ›´æ–°ï¼‰",
  "description": "æ›´æ–°åçš„æè¿°ä¿¡æ¯",
  "status": 0
}
```

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM module_entity WHERE id = 1;
-- éªŒè¯ name, description, status, update_time å·²æ›´æ–°
```

---

### 2.6 åˆ é™¤æ¨¡å—

**è¯·æ±‚è·¯å¾„**: `DELETE /api/modules/{id}`

**ç¤ºä¾‹**: `DELETE /api/modules/1`

**æ•°æ®åº“éªŒè¯ (MySQL)**:
```sql
SELECT * FROM module_entity WHERE id = 1;
-- åº”è¯¥æŸ¥ä¸åˆ°æ•°æ®
```

---

## 3. åŸå§‹æ•°æ®æ¥å£ (RawDataController) - MongoDB

### 3.1 ä¿å­˜åŸå§‹æ•°æ®

**è¯·æ±‚è·¯å¾„**: `POST /api/raw-data`

**è¯·æ±‚ä½“**:
```json
{
  "moduleId": 1,
  "dataType": "sensor",
  "dataContent": "æ¸©åº¦: 25.5â„ƒ, æ¹¿åº¦: 60%",
  "content": {
    "temperature": 25.5,
    "humidity": 60,
    "location": "å®éªŒå®¤A"
  },
  "source": "ä¼ æ„Ÿå™¨001",
  "version": 1,
  "processed": false
}
```

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
// åœ¨ MongoDB ä¸­æŸ¥è¯¢
use module_db;
db.raw_data.find({ source: "ä¼ æ„Ÿå™¨001" }).pretty();

// æˆ–è€…æŸ¥è¯¢æœ€æ–°æ’å…¥çš„æ•°æ®
db.raw_data.find().sort({ _id: -1 }).limit(1).pretty();

// éªŒè¯å­—æ®µ
// _id: MongoDB è‡ªåŠ¨ç”Ÿæˆçš„ID
// module_id: 1
// data_type: "sensor"
// data_content: "æ¸©åº¦: 25.5â„ƒ, æ¹¿åº¦: 60%"
// content: { temperature: 25.5, humidity: 60, location: "å®éªŒå®¤A" }
// source: "ä¼ æ„Ÿå™¨001"
// version: 1
// processed: false
// create_time: å½“å‰æ—¶é—´
// update_time: å½“å‰æ—¶é—´
```

---

### 3.2 æ ¹æ®IDæŸ¥è¯¢åŸå§‹æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/raw-data/{id}`

**ç¤ºä¾‹**: `GET /api/raw-data/507f1f77bcf86cd799439011`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
```

---

### 3.3 æ ¹æ®æ•°æ®ç±»å‹æŸ¥è¯¢

**è¯·æ±‚è·¯å¾„**: `GET /api/raw-data/type/{dataType}`

**ç¤ºä¾‹**: `GET /api/raw-data/type/sensor`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.find({ data_type: "sensor" }).pretty();
```

---

### 3.4 æŸ¥è¯¢æœªå¤„ç†çš„æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/raw-data/unprocessed`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.find({ processed: false }).pretty();
```

---

### 3.5 æ ¹æ®æ—¶é—´èŒƒå›´æŸ¥è¯¢

**è¯·æ±‚è·¯å¾„**: `GET /api/raw-data/time-range?start=2025-12-01T00:00:00&end=2025-12-31T23:59:59`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.find({
  create_time: {
    $gte: ISODate("2025-12-01T00:00:00Z"),
    $lte: ISODate("2025-12-31T23:59:59Z")
  }
}).pretty();
```

---

### 3.6 æ ‡è®°æ•°æ®ä¸ºå·²å¤„ç†

**è¯·æ±‚è·¯å¾„**: `PUT /api/raw-data/{id}/processed`

**ç¤ºä¾‹**: `PUT /api/raw-data/507f1f77bcf86cd799439011/processed`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
// æ‰§è¡Œæ›´æ–°åæŸ¥è¯¢
db.raw_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });

// éªŒè¯ processed å­—æ®µå·²æ›´æ–°ä¸º true
// processed: true
// update_time: å·²æ›´æ–°ä¸ºå½“å‰æ—¶é—´
```

---

### 3.7 ç»Ÿè®¡æ•°æ®ç±»å‹æ•°é‡

**è¯·æ±‚è·¯å¾„**: `GET /api/raw-data/count/{dataType}`

**ç¤ºä¾‹**: `GET /api/raw-data/count/sensor`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.countDocuments({ data_type: "sensor" });
```

---

## 4. æ¨¡å—ç›¸å…³åŸå§‹æ•°æ®æ¥å£ (ModuleController)

### 4.1 åˆ›å»ºåŸå§‹æ•°æ®ï¼ˆé€šè¿‡æ¨¡å—æ¥å£ï¼‰

**è¯·æ±‚è·¯å¾„**: `POST /api/modules/raw-data`

**è¯·æ±‚ä½“**:
```json
{
  "moduleId": 1,
  "dataType": "weather",
  "dataContent": "å¤©æ°”æ•°æ®",
  "content": {
    "weather": "æ™´å¤©",
    "temperature": 28,
    "windSpeed": 5
  },
  "source": "æ°”è±¡ç«™001",
  "processed": false
}
```

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
use module_db;
db.raw_data.find({ source: "æ°”è±¡ç«™001" }).pretty();
```

---

### 4.2 æ›´æ–°åŸå§‹æ•°æ®

**è¯·æ±‚è·¯å¾„**: `PUT /api/modules/raw-data/{id}`

**ç¤ºä¾‹**: `PUT /api/modules/raw-data/507f1f77bcf86cd799439011`

**è¯·æ±‚ä½“**:
```json
{
  "moduleId": 1,
  "dataType": "weather",
  "dataContent": "æ›´æ–°åçš„å¤©æ°”æ•°æ®",
  "content": {
    "weather": "å¤šäº‘",
    "temperature": 26,
    "windSpeed": 8
  },
  "source": "æ°”è±¡ç«™001",
  "processed": true
}
```

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
// éªŒè¯æ‰€æœ‰å­—æ®µå·²æ›´æ–°ï¼ŒåŒ…æ‹¬ update_time
```

---

### 4.3 åˆ é™¤åŸå§‹æ•°æ®

**è¯·æ±‚è·¯å¾„**: `DELETE /api/modules/raw-data/{id}`

**ç¤ºä¾‹**: `DELETE /api/modules/raw-data/507f1f77bcf86cd799439011`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
// åº”è¯¥è¿”å› null
```

---

### 4.4 æ ¹æ®æ¨¡å—IDæŸ¥è¯¢åŸå§‹æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/modules/{moduleId}/raw-data`

**ç¤ºä¾‹**: `GET /api/modules/1/raw-data`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.raw_data.find({ module_id: 1 }).pretty();
```

---

### 4.5 è·å–ç»„åˆæ•°æ®ï¼ˆæ¨¡å—+åŸå§‹æ•°æ®ï¼‰

**è¯·æ±‚è·¯å¾„**: `GET /api/modules/{moduleId}/combined`

**ç¤ºä¾‹**: `GET /api/modules/1/combined`

**æ•°æ®åº“éªŒè¯**:
```sql
-- MySQL æŸ¥è¯¢æ¨¡å—ä¿¡æ¯
SELECT * FROM module_entity WHERE id = 1;
```

```javascript
-- MongoDB æŸ¥è¯¢åŸå§‹æ•°æ®
db.raw_data.find({ module_id: 1 }).pretty();
```

---

## 5. æ—¥å¿—æ•°æ®æ¥å£ (LogDataController) - MongoDB

### 5.1 åˆ›å»ºæ—¥å¿—æ•°æ®

**è¯·æ±‚è·¯å¾„**: `POST /api/log-data`

**è¯·æ±‚ä½“**:
```json
{
  "level": "INFO",
  "message": "ç”¨æˆ·ç™»å½•æˆåŠŸ",
  "timestamp": "2025-12-05T16:30:00",
  "metadata": {
    "userId": 1,
    "ip": "192.168.1.100",
    "action": "login"
  }
}
```

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
use module_db;
db.log_data.find({ message: "ç”¨æˆ·ç™»å½•æˆåŠŸ" }).pretty();

// éªŒè¯å­—æ®µ
// _id: MongoDB è‡ªåŠ¨ç”Ÿæˆçš„ID
// level: "INFO"
// message: "ç”¨æˆ·ç™»å½•æˆåŠŸ"
// timestamp: ISODate("2025-12-05T16:30:00Z")
// metadata: { userId: 1, ip: "192.168.1.100", action: "login" }
// create_time: å½“å‰æ—¶é—´
```

---

### 5.2 æ ¹æ®IDæŸ¥è¯¢æ—¥å¿—æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/log-data/{id}`

**ç¤ºä¾‹**: `GET /api/log-data/507f1f77bcf86cd799439011`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
```

---

### 5.3 æŸ¥è¯¢æ‰€æœ‰æ—¥å¿—æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/log-data`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.find().pretty();
```

---

### 5.4 åˆ†é¡µæŸ¥è¯¢æ—¥å¿—æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/log-data/page?page=0&size=10`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.find().skip(0).limit(10).pretty();
```

---

### 5.5 æ ¹æ®æ—¥å¿—çº§åˆ«æŸ¥è¯¢

**è¯·æ±‚è·¯å¾„**: `GET /api/log-data/level/{level}`

**ç¤ºä¾‹**: `GET /api/log-data/level/INFO`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.find({ level: "INFO" }).pretty();
```

---

### 5.6 æ ¹æ®æ—¶é—´èŒƒå›´æŸ¥è¯¢æ—¥å¿—

**è¯·æ±‚è·¯å¾„**: `GET /api/log-data/time-range?start=2025-12-01T00:00:00&end=2025-12-31T23:59:59`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.find({
  timestamp: {
    $gte: ISODate("2025-12-01T00:00:00Z"),
    $lte: ISODate("2025-12-31T23:59:59Z")
  }
}).pretty();
```

---

### 5.7 åˆ é™¤æ—¥å¿—æ•°æ®

**è¯·æ±‚è·¯å¾„**: `DELETE /api/log-data/{id}`

**ç¤ºä¾‹**: `DELETE /api/log-data/507f1f77bcf86cd799439011`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
// åº”è¯¥è¿”å› null
```

---

### 5.8 ç»Ÿè®¡æ—¥å¿—çº§åˆ«æ•°é‡

**è¯·æ±‚è·¯å¾„**: `GET /api/log-data/count/level/{level}`

**ç¤ºä¾‹**: `GET /api/log-data/count/level/ERROR`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.log_data.countDocuments({ level: "ERROR" });
```

---

## 6. å¤„ç†æ•°æ®æ¥å£ (ProcessedDataController) - MongoDB

### 6.1 åˆ›å»ºå¤„ç†æ•°æ®

**è¯·æ±‚è·¯å¾„**: `POST /api/processed-data`

**è¯·æ±‚ä½“**:
```json
{
  "rawDataId": 1,
  "processedContent": {
    "result": "å¤„ç†å®Œæˆ",
    "confidence": 0.95,
    "category": "æ­£å¸¸"
  },
  "processType": "classification",
  "confidenceScore": 0.95,
  "metadata": {
    "processor": "AIæ¨¡å‹v1.0",
    "processTime": "2025-12-05T16:35:00"
  }
}
```

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
use module_db;
db.processed_data.find({ process_type: "classification" }).pretty();

// éªŒè¯å­—æ®µ
// _id: MongoDB è‡ªåŠ¨ç”Ÿæˆçš„ID
// raw_data_id: 1
// processed_content: { result: "å¤„ç†å®Œæˆ", confidence: 0.95, category: "æ­£å¸¸" }
// process_type: "classification"
// confidence_score: 0.95
// metadata: { processor: "AIæ¨¡å‹v1.0", processTime: "2025-12-05T16:35:00" }
// create_time: å½“å‰æ—¶é—´
```

---

### 6.2 æ ¹æ®IDæŸ¥è¯¢å¤„ç†æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data/{id}`

**ç¤ºä¾‹**: `GET /api/processed-data/507f1f77bcf86cd799439011`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
```

---

### 6.3 æŸ¥è¯¢æ‰€æœ‰å¤„ç†æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.find().pretty();
```

---

### 6.4 æ ¹æ®å¤„ç†ç±»å‹æŸ¥è¯¢

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data/type/{processType}`

**ç¤ºä¾‹**: `GET /api/processed-data/type/classification`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.find({ process_type: "classification" }).pretty();
```

---

### 6.5 æ ¹æ®åŸå§‹æ•°æ®IDæŸ¥è¯¢

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data/raw-data/{rawDataId}`

**ç¤ºä¾‹**: `GET /api/processed-data/raw-data/1`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.find({ raw_data_id: 1 }).pretty();
```

---

### 6.6 æŸ¥è¯¢æœ€å°ç½®ä¿¡åº¦æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data/confidence/min/{minScore}`

**ç¤ºä¾‹**: `GET /api/processed-data/confidence/min/0.8`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.find({ confidence_score: { $gt: 0.8 } }).pretty();
```

---

### 6.7 æŸ¥è¯¢ç½®ä¿¡åº¦èŒƒå›´æ•°æ®

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data/confidence/range?minScore=0.7&maxScore=0.9`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.find({
  confidence_score: {
    $gte: 0.7,
    $lte: 0.9
  }
}).pretty();
```

---

### 6.8 æ ¹æ®å­—æ®µæœç´¢

**è¯·æ±‚è·¯å¾„**: `GET /api/processed-data/search/field?field=category&value=æ­£å¸¸`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.find({ "processed_content.category": "æ­£å¸¸" }).pretty();
```

---

### 6.9 æ›´æ–°ç½®ä¿¡åº¦åˆ†æ•°

**è¯·æ±‚è·¯å¾„**: `PUT /api/processed-data/{id}/confidence?confidenceScore=0.98`

**ç¤ºä¾‹**: `PUT /api/processed-data/507f1f77bcf86cd799439011/confidence?confidenceScore=0.98`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
// éªŒè¯ confidence_score å·²æ›´æ–°ä¸º 0.98
```

---

### 6.10 åˆ é™¤å¤„ç†æ•°æ®

**è¯·æ±‚è·¯å¾„**: `DELETE /api/processed-data/{id}`

**ç¤ºä¾‹**: `DELETE /api/processed-data/507f1f77bcf86cd799439011`

**æ•°æ®åº“éªŒè¯ (MongoDB)**:
```javascript
db.processed_data.findOne({ _id: ObjectId("507f1f77bcf86cd799439011") });
// åº”è¯¥è¿”å› null
```

---

## ğŸ“ æµ‹è¯•å·¥å…·æ¨è

### 1. Postman / Insomnia
- ç”¨äºå‘é€ HTTP è¯·æ±‚å’Œæµ‹è¯•æ¥å£
- æ”¯æŒä¿å­˜è¯·æ±‚é›†åˆå’Œæµ‹è¯•è„šæœ¬

### 2. cURL å‘½ä»¤ç¤ºä¾‹

```bash
# åˆ›å»ºç”¨æˆ·
curl -X POST http://localhost:8080/api/users \
  -H "Content-Type: application/json" \
  -d '{"username":"testuser","email":"test@example.com","phone":"13800138000","status":1}'

# æŸ¥è¯¢ç”¨æˆ·
curl http://localhost:8080/api/users/1

# åˆ›å»ºåŸå§‹æ•°æ®
curl -X POST http://localhost:8080/api/raw-data \
  -H "Content-Type: application/json" \
  -d '{"moduleId":1,"dataType":"sensor","dataContent":"æµ‹è¯•æ•°æ®","source":"æµ‹è¯•æº","processed":false}'
```

### 3. æ•°æ®åº“æŸ¥è¯¢å·¥å…·
- **MySQL**: MySQL Workbench, Navicat, DBeaver
- **MongoDB**: MongoDB Compass, Studio 3T, Robo 3T

---

## âœ… æµ‹è¯•æ£€æŸ¥æ¸…å•

### MySQL æ•°æ®åº“ (zaiqing)
- [ ] `user` è¡¨ï¼šæµ‹è¯•ç”¨æˆ·å¢åˆ æ”¹æŸ¥
- [ ] `module_entity` è¡¨ï¼šæµ‹è¯•æ¨¡å—å¢åˆ æ”¹æŸ¥

### MongoDB æ•°æ®åº“ (module_db)
- [ ] `raw_data` é›†åˆï¼šæµ‹è¯•åŸå§‹æ•°æ®æ“ä½œ
- [ ] `log_data` é›†åˆï¼šæµ‹è¯•æ—¥å¿—æ•°æ®æ“ä½œ
- [ ] `processed_data` é›†åˆï¼šæµ‹è¯•å¤„ç†æ•°æ®æ“ä½œ

---

## ğŸ” å¸¸è§é—®é¢˜

1. **æ—¶é—´æ ¼å¼**ï¼šæ‰€æœ‰æ—¶é—´å­—æ®µåœ¨ MongoDB ä¸­å­˜å‚¨ä¸º ISODate æ ¼å¼
2. **ID æ ¼å¼**ï¼š
   - MySQL: è‡ªå¢ Long ç±»å‹
   - MongoDB: ObjectId å­—ç¬¦ä¸²
3. **å­—æ®µæ˜ å°„**ï¼šJava é©¼å³°å‘½åè½¬æ¢ä¸ºæ•°æ®åº“ä¸‹åˆ’çº¿å‘½åï¼ˆå¦‚ `moduleId` â†’ `module_id`ï¼‰

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0  
**æœ€åæ›´æ–°**: 2025-12-05  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

