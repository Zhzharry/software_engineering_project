# 多源数据管理系统 - 功能清单

## 项目概述

本项目是一个灾情/危机数据管理系统，支持多源数据的存储、处理、解码、查询和可视化。系统采用前后端分离架构，使用 Spring Boot + Vue 3 技术栈，支持 MySQL 和 MongoDB 双数据库存储，集成高德地图API实现地理信息解析和地图可视化。

---

## 一、用户管理模块

### 1.1 用户基础功能
- **创建用户** - 支持创建新用户，包含用户名、邮箱、手机号、状态等信息
- **查询所有用户** - 获取系统中所有用户列表
- **根据ID查询用户** - 通过用户ID精确查询用户信息
- **根据用户名查询用户** - 通过用户名查询用户信息
- **更新用户信息** - 支持修改用户的所有信息（用户名、邮箱、手机号、状态等）
- **删除用户** - 支持删除指定用户

### 1.2 用户高级功能
- **分页查询用户** - 支持分页、排序功能，可自定义每页大小和排序字段
- **检查用户名是否存在** - 验证用户名是否已被使用
- **用户状态管理** - 支持启用/禁用用户状态（status: 1启用, 0禁用）

### 1.3 前端界面功能
- **用户列表展示** - 表格形式展示用户信息，包含ID、用户名、邮箱、手机号、状态、创建时间
- **新增用户弹窗** - 模态框形式的新增用户界面
- **编辑用户功能** - 点击编辑按钮可修改用户信息
- **删除确认提示** - 删除操作前进行二次确认
- **状态标识显示** - 使用不同颜色的标签显示用户状态（启用/禁用）
- **时间格式化显示** - 创建时间自动格式化为中文日期格式

---

## 二、模块管理模块

### 2.1 模块基础功能
- **创建模块** - 支持创建新模块，包含模块名称、描述、状态等信息
- **查询所有模块** - 获取系统中所有模块列表
- **根据ID查询模块** - 通过模块ID精确查询模块信息
- **更新模块信息** - 支持修改模块的所有信息（名称、描述、状态等）
- **删除模块** - 支持删除指定模块

### 2.2 模块高级功能
- **分页查询模块** - 支持分页、排序功能
- **根据状态查询模块** - 按启用/禁用状态筛选模块
- **模块状态管理** - 支持启用/禁用模块状态

### 2.3 模块关联原始数据功能
- **创建原始数据** - 通过模块接口创建关联的原始数据
- **更新原始数据** - 更新模块关联的原始数据
- **删除原始数据** - 删除模块关联的原始数据
- **根据模块ID查询原始数据** - 查询指定模块下的所有原始数据
- **获取组合数据** - 同时获取模块信息和关联的原始数据

### 2.4 前端界面功能
- **模块列表展示** - 表格形式展示模块信息
- **搜索功能** - 支持按模块名称、状态进行搜索筛选
- **新增/编辑模块弹窗** - 模态框形式的模块编辑界面
- **批量删除功能** - 支持选择多个模块进行批量删除
- **状态切换功能** - 快速启用/禁用模块
- **分页显示** - 支持分页浏览，可自定义每页显示数量

---

## 三、原始数据管理模块

### 3.1 原始数据基础功能
- **保存原始数据** - 支持保存原始数据到MongoDB，包含模块ID、数据类型、数据内容、来源等信息
- **查询所有原始数据** - 获取所有原始数据列表
- **根据ID查询原始数据** - 通过数据ID精确查询
- **删除原始数据** - 支持删除指定原始数据

### 3.2 原始数据查询功能
- **根据数据类型查询** - 按数据类型（如sensor、weather等）筛选数据
- **查询未处理数据** - 筛选出所有未处理（processed=false）的数据
- **根据时间范围查询** - 支持按创建时间范围查询数据
- **统计数据类型数量** - 统计指定类型的数据条数

### 3.3 原始数据处理功能
- **标记数据为已处理** - 将原始数据标记为已处理状态（processed=true）
- **数据版本管理** - 支持数据版本号（version）字段
- **结构化内容存储** - 支持存储JSON格式的结构化数据内容（content字段）
- **自动ID解码** - 保存数据时自动识别并解码36位灾情ID，更新解码后的字段

### 3.4 原始数据解码字段
- **灾情ID存储** - 存储36位一体化编码ID
- **地理码解析** - 解析12位地理码
- **时间信息解析** - 解析灾情发生时间
- **来源信息解析** - 解析数据来源（大类、子类）
- **载体类型解析** - 解析载体类型（文字/图像/音频/视频）
- **灾情信息解析** - 解析灾害大类、子类、指标
- **完整描述生成** - 自动生成解码后的完整描述

### 3.5 前端界面功能
- **原始数据列表展示** - 表格形式展示原始数据，包含ID、模块ID、数据类型、数据内容、来源、状态、创建时间
- **新增原始数据** - 支持手动创建原始数据
- **未处理数据筛选** - 一键筛选显示所有未处理的数据
- **标记已处理功能** - 对未处理数据可一键标记为已处理
- **数据内容截断显示** - 长文本内容自动截断，避免表格过宽
- **状态标识显示** - 清晰标识数据是否已处理

---

## 四、处理数据管理模块

### 4.1 处理数据基础功能
- **创建处理数据** - 支持创建处理后的数据，包含原始数据ID、处理类型、处理内容、置信度等信息
- **查询所有处理数据** - 获取所有处理数据列表
- **根据ID查询处理数据** - 通过数据ID精确查询
- **删除处理数据** - 支持删除指定处理数据

### 4.2 处理数据查询功能
- **根据处理类型查询** - 按处理类型（如classification等）筛选数据
- **根据原始数据ID查询** - 查询指定原始数据的所有处理结果
- **查询最小置信度数据** - 筛选置信度大于指定值的数据
- **查询置信度范围数据** - 按置信度范围（min-max）筛选数据
- **根据字段搜索** - 在处理内容（processedContent）中按字段名和值进行搜索

### 4.3 处理数据高级功能
- **置信度评估** - 支持置信度分数（confidenceScore，0-1范围）的存储和查询
- **更新置信度分数** - 支持单独更新处理数据的置信度
- **处理内容存储** - 支持存储JSON格式的处理结果内容
- **元数据存储** - 支持存储处理相关的元数据信息（如处理器、处理时间等）

### 4.4 前端界面功能
- **处理数据列表展示** - 表格形式展示处理数据，包含ID、原始数据ID、处理类型、处理内容、置信度、创建时间
- **新增处理数据** - 支持手动创建处理数据，可输入JSON格式的处理内容
- **更新置信度功能** - 支持单独更新置信度分数
- **置信度可视化** - 根据置信度值显示不同颜色的标签（高/中/低）
- **删除处理数据** - 支持删除处理数据，带确认提示

---

## 五、日志数据管理模块

### 5.1 日志数据基础功能
- **创建日志数据** - 支持创建日志记录，包含日志级别、消息、时间戳、元数据等信息
- **查询所有日志数据** - 获取所有日志记录列表
- **根据ID查询日志数据** - 通过日志ID精确查询
- **删除日志数据** - 支持删除指定日志记录

### 5.2 日志数据查询功能
- **根据日志级别查询** - 按日志级别（INFO、WARN、ERROR、DEBUG）筛选日志
- **根据时间范围查询** - 支持按时间戳范围查询日志
- **分页查询日志** - 支持分页浏览日志数据
- **统计日志级别数量** - 统计指定级别的日志条数

### 5.3 日志数据高级功能
- **多级别日志支持** - 支持INFO、WARN、ERROR、DEBUG四种日志级别
- **元数据存储** - 支持存储JSON格式的元数据（如用户ID、IP地址、操作类型等）
- **时间戳管理** - 自动记录日志创建时间

### 5.4 前端界面功能
- **日志列表展示** - 表格形式展示日志数据，包含ID、级别、消息、时间戳、元数据
- **按级别筛选** - 下拉选择框筛选不同级别的日志
- **级别标识显示** - 不同级别的日志使用不同颜色的标签和行背景色
- **新增日志功能** - 支持手动创建日志记录，可输入JSON格式的元数据
- **删除日志功能** - 支持删除日志，带确认提示
- **时间格式化显示** - 时间戳自动格式化为中文日期格式

---

## 六、文件管理模块

### 6.1 文件基础功能
- **文件上传** - 支持上传多种格式文件（图片、文档、视频、音频等），最大500MB
- **文件下载** - 支持下载已上传的文件
- **文件预览** - 支持预览图片、PDF等可预览文件
- **文件查询** - 根据文件ID、类型、关联数据等查询文件
- **文件删除** - 支持删除文件及其元数据

### 6.2 文件查询功能
- **查询所有文件** - 获取所有文件列表
- **根据文件类型查询** - 按文件类型筛选文件
- **根据关联数据查询** - 查询与特定数据关联的文件
- **根据用户查询** - 查询指定用户上传的文件
- **文件统计** - 统计文件数量、总大小、类型分布等

### 6.3 文件高级功能
- **文件元数据管理** - 存储文件名称、类型、大小、MIME类型、上传时间等信息
- **文件访问控制** - 支持设置文件访问级别
- **文件关联管理** - 支持将文件关联到原始数据、处理数据等
- **文件URL生成** - 生成文件访问URL

### 6.4 前端界面功能
- **文件列表展示** - 表格/卡片形式展示文件信息
- **文件上传界面** - 拖拽上传、选择文件上传
- **文件预览功能** - 支持在线预览图片、PDF等
- **文件下载功能** - 一键下载文件
- **文件类型筛选** - 按文件类型筛选显示
- **文件统计展示** - 显示文件总数、总大小、类型分布等

---

## 七、数据看板模块

### 7.1 数据统计功能
- **系统数据概览** - 统计原始数据、处理数据、文件数量、用户数量等
- **数据类型分布** - 统计各类型数据的数量和占比
- **数据趋势分析** - 按时间维度分析数据增长趋势（支持7/14/30天）
- **数据来源分布** - 统计各数据来源的数量分布
- **处理状态分布** - 统计已处理/未处理数据的分布

### 7.2 图表可视化功能
- **饼图展示** - 数据类型分布、处理状态分布等饼图
- **折线图展示** - 数据趋势折线图，支持自定义时间范围
- **柱状图展示** - 数据来源分布柱状图
- **统计卡片** - 关键指标统计卡片展示

### 7.3 活动记录功能
- **最近活动记录** - 显示系统最近的操作活动
- **活动时间线** - 时间线形式展示活动记录

### 7.4 前端界面功能
- **数据看板首页** - 综合展示系统各项统计数据
- **图表交互** - 支持图表缩放、筛选、时间范围选择
- **实时更新** - 统计数据实时刷新
- **响应式布局** - 适配不同屏幕尺寸

---

## 八、灾情解码模块

### 8.1 ID解码功能
- **单个ID解码** - 解码36位一体化编码ID，返回结构化的解码信息
- **批量ID解码** - 支持批量解码多个ID
- **ID格式验证** - 验证36位ID格式是否正确

### 8.2 地理信息解析功能
- **地理码定位** - 根据12位地理码进行精确定位，解析省、市、县、乡镇、村层级结构
- **逆地理编码** - 根据经纬度获取地理位置信息（省、市、区、详细地址）
- **地理编码** - 根据地址获取经纬度坐标
- **行政区划查询** - 查询各级行政区划信息

### 8.3 文件解码功能
- **文件名解码** - 从文件名中提取36位ID并解码
- **批量文件名解码** - 批量解码多个文件名
- **Excel内容解码** - 读取Excel文件，提取ID列并批量解码
- **自动ID检测** - Excel解码时自动检测包含36位ID的列

### 8.4 解码结果信息
- **震情码解析** - 解析26位震情码（12位地理码 + 14位时间码）
- **来源码解析** - 解析来源大类、子类（如后方指挥部、互联网感知等）
- **载体码解析** - 解析载体类型（文字、图像、音频、视频）
- **灾情码解析** - 解析6位灾情码（灾害大类、子类、指标）
- **完整描述生成** - 自动生成人类可读的完整描述

### 8.5 前端界面功能
- **ID解码界面** - 输入36位ID进行解码，展示详细解码结果
- **批量解码界面** - 文本域输入多个ID，表格展示解码结果
- **文件解码界面** - 上传Excel文件或输入文件名进行解码
- **地理定位界面** - 输入地理码或经纬度进行定位查询
- **解码结果展示** - 使用描述列表清晰展示解码后的各项信息

---

## 九、灾情数据查询模块

### 9.1 多维度查询功能
- **按灾害大类查询** - 查询指定灾害大类（震情、人员伤亡、房屋破坏、生命线工程、次生灾害）的数据
- **按灾害子类查询** - 查询指定灾害子类（如砖木、框架等）的数据
- **按来源查询** - 查询指定来源（后方指挥部、互联网感知等）的数据
- **按载体类型查询** - 查询指定载体类型（文字、图像、音频、视频）的数据
- **按地理码查询** - 查询指定12位地理码的数据
- **按时间范围查询** - 查询指定时间范围内的灾情数据

### 9.2 综合查询功能
- **多条件组合查询** - 支持多个条件组合查询，支持分页
- **数据详情查询** - 获取包含完整解码信息的数据详情

### 9.3 前端界面功能
- **搜索条件栏** - 提供灾害大类、子类、来源、载体、地理码、时间范围等筛选条件
- **数据列表展示** - 表格形式展示查询结果，包含灾情ID、类别、来源、载体、时间等信息
- **数据详情查看** - 点击数据行查看包含解码信息的详细数据
- **分页功能** - 支持分页浏览查询结果

---

## 十、灾情数据处理模块

### 10.1 自动解码处理功能
- **自动ID识别** - 从数据内容、ID字段等位置自动识别36位ID
- **自动解码更新** - 识别到ID后自动解码并更新相关字段
- **批量处理** - 支持批量处理多条数据

### 10.2 数据处理功能
- **单个数据处理** - 处理并解码单个RawData
- **批量数据处理** - 批量处理并解码多个RawData
- **根据ID字符串处理** - 从指定的ID字符串中提取36位ID并解码

### 10.3 处理结果
- **解码字段更新** - 自动更新地理码、时间、来源、载体、灾情类别等字段
- **描述生成** - 自动生成解码后的完整描述
- **处理状态记录** - 记录数据处理状态和结果

---

## 十一、存储策略模块

### 11.1 策略管理功能
- **创建存储策略** - 创建数据存储和淘汰策略配置
- **更新存储策略** - 修改存储策略配置
- **删除存储策略** - 删除指定的存储策略
- **查询存储策略** - 查询所有存储策略或根据ID查询

### 11.2 策略查询功能
- **根据数据类型查询** - 查询指定数据类型的存储策略
- **查询活跃策略** - 查询所有启用状态的存储策略

### 11.3 策略配置项
- **策略名称** - 存储策略的名称
- **数据类型** - 适用的数据类型
- **存储类型** - 存储类型（mysql、mongodb、redis等）
- **保留天数** - 数据保留天数
- **最大存储大小** - 最大存储大小（字节）
- **清理规则** - 清理规则（JSON格式）
- **策略状态** - 启用/禁用状态

### 11.4 前端界面功能
- **策略列表展示** - 表格形式展示存储策略
- **新增/编辑策略** - 模态框形式的策略编辑界面
- **策略状态管理** - 启用/禁用存储策略
- **策略详情查看** - 查看策略的详细配置信息

---

## 十二、数据淘汰模块

### 12.1 数据淘汰功能
- **原始数据淘汰** - 根据过期时间或保留策略淘汰过期的原始数据
- **处理数据淘汰** - 根据过期时间或保留策略淘汰过期的处理数据
- **全部数据淘汰** - 一次性淘汰所有过期的数据
- **按策略淘汰** - 根据指定数据类型的存储策略进行数据淘汰

### 12.2 淘汰策略
- **时间淘汰** - 根据数据的过期时间（expireTime）进行淘汰
- **保留天数淘汰** - 根据保留天数（retentionDays）进行淘汰
- **策略淘汰** - 根据存储策略配置的清理规则进行淘汰

### 12.3 前端界面功能
- **淘汰操作界面** - 提供不同类型数据的淘汰操作按钮
- **淘汰结果展示** - 显示淘汰的数据条数
- **淘汰策略配置** - 配置数据淘汰策略

---

## 十三、地图可视化模块

### 13.1 地图数据接口
- **灾情点位数据** - 获取所有灾情点位数据（包含经纬度），支持按类别、来源、载体筛选
- **区域统计数据** - 按区域统计灾情数量（省/市/区级别），用于热力图
- **聚合点位数据** - 根据地图缩放级别对临近点位进行聚合
- **时间轴数据** - 按时间顺序返回灾情点位，用于时间轴动画
- **地图概览统计** - 返回地图页面展示的概览数据

### 13.2 地图可视化功能
- **点位标注** - 在地图上标注灾情点位，不同类别使用不同颜色
- **聚合显示** - 当地图缩放级别较小时，自动聚合临近点位
- **热力图显示** - 根据区域统计数据生成热力图
- **信息窗口** - 点击点位显示详细信息
- **图例显示** - 显示不同灾情类别的图例

### 13.3 前端界面功能
- **地图容器** - 集成高德地图JS API，显示地图
- **筛选工具栏** - 提供灾情类别、数据来源等筛选条件
- **视图模式切换** - 支持点位模式、聚合模式、热力图模式切换
- **信息面板** - 显示数据概览、类别分布等统计信息
- **图例面板** - 显示不同灾情类型的颜色标识

---

## 十四、系统基础设施功能

### 14.1 数据库支持
- **MySQL数据库** - 用于存储用户和模块等结构化数据
- **MongoDB数据库** - 用于存储原始数据、处理数据、日志数据等非结构化数据
- **双数据库配置** - 同时支持MySQL和MongoDB，自动配置和连接管理
- **数据库初始化脚本** - 提供数据库表结构初始化SQL脚本

### 14.2 后端API功能
- **RESTful API设计** - 遵循RESTful规范设计所有接口
- **统一响应格式** - 使用Result类统一封装API响应
- **异常处理** - 全局异常处理器，统一处理系统异常
- **CORS跨域支持** - 配置跨域资源共享，支持前后端分离部署
- **分页支持** - 使用Spring Data的分页功能
- **时间格式处理** - 支持ISO日期时间格式的自动转换

### 14.3 前端功能
- **Vue 3框架** - 使用Vue 3 Composition API开发
- **Vue Router路由** - 实现多页面路由导航
- **响应式布局** - 适配不同屏幕尺寸
- **API统一管理** - 使用axios进行HTTP请求，API接口统一封装
- **Mock数据支持** - 支持Mock模式，前端可独立运行
- **错误提示** - 统一的错误消息提示机制
- **加载状态** - 数据加载时显示加载提示
- **Element Plus UI** - 使用Element Plus组件库构建界面
- **ECharts图表** - 集成ECharts实现数据可视化

### 14.4 部署功能
- **Docker支持** - 提供Dockerfile和docker-compose.yml，支持一键部署
- **Docker Compose编排** - 一键启动MySQL、MongoDB、后端、前端所有服务
- **Nginx配置** - 生产环境使用Nginx作为反向代理服务器
- **环境配置** - 支持开发环境和生产环境配置切换

### 14.5 第三方集成
- **高德地图API** - 集成高德地图Web服务API和JS API
- **地理编码服务** - 支持地理编码和逆地理编码
- **行政区划查询** - 支持查询各级行政区划信息
- **Apache POI** - 支持Excel文件读取和处理

---

## 十五、技术特性

### 15.1 后端技术栈
- **Spring Boot 2.7** - 后端框架
- **Spring Data JPA** - MySQL数据访问层
- **Spring Data MongoDB** - MongoDB数据访问层
- **Lombok** - 简化Java代码
- **统一异常处理** - GlobalExceptionHandler
- **CORS配置** - CorsConfig跨域配置
- **RestTemplate** - HTTP客户端，用于调用高德API
- **Jackson** - JSON处理
- **Apache POI** - Excel文件处理

### 15.2 前端技术栈
- **Vue 3** - 前端框架
- **Vue Router** - 路由管理
- **Axios** - HTTP客户端
- **Vite** - 构建工具
- **Element Plus** - UI组件库
- **ECharts** - 图表库
- **高德地图JS API** - 地图可视化

### 15.3 数据库
- **MySQL 5.7+** - 关系型数据库
- **MongoDB 4.0+** - 文档型数据库

---

