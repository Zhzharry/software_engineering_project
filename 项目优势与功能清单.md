# 多源数据管理系统 - 项目优势与功能清单

## 项目优势总结

本系统采用**MySQL + MongoDB双数据库混合架构**，充分发挥关系型数据库和文档型数据库各自优势，实现结构化数据和非结构化数据的最优存储方案；采用**前后端分离架构**，使用**Vue 3 + Spring Boot现代化技术栈**，通过RESTful API实现标准化接口通信，技术栈解耦便于团队协作和独立部署；系统提供**完整的数据处理流程**，从数据采集、处理到结果评估形成闭环，支持置信度评估机制和数据状态管理，具备多维度查询、分页支持、组合查询等灵活的查询能力，以及多级别日志系统；系统具备**强大的灾情数据解码能力**，支持36位一体化编码ID的完整解析，包括震情码、来源码、载体码、灾情码的解析，支持12位地理码的层级结构解析（省、市、县、乡镇、村），支持文件名解码和Excel内容批量解码，集成高德地图API实现地理信息解析和地图可视化；支持**Docker容器化一键部署**，通过docker-compose实现环境一致性，支持多种部署模式（Docker、本地、Mock），降低部署复杂度；提供**完善的文档支持**（项目文档、接口测试文档、数据库配置文档、灾情解码API文档），前端支持Mock模式便于独立开发，Vite热重载提升开发效率；采用**模块化架构设计**，三层架构职责清晰，RESTful API标准化便于第三方集成，MongoDB文档模型支持灵活扩展，可轻松扩展为微服务架构；系统具备良好的性能优化（索引支持、分页查询、按需加载、静态资源优化）、安全性保障（输入验证、异常处理、CORS配置、文件访问控制）和维护性特点（代码结构清晰、注释完善、文档齐全），是一个功能完整、架构合理、技术先进、易于部署和维护的企业级灾情数据管理系统。

---

## 功能清单

### 一、用户管理模块（17项功能）

#### 后端功能（8项）
1. 创建用户
2. 查询所有用户
3. 根据ID查询用户
4. 根据用户名查询用户
5. 分页查询用户
6. 更新用户信息
7. 删除用户
8. 检查用户名是否存在

#### 前端功能（9项）
9. 用户列表展示
10. 新增用户弹窗
11. 编辑用户功能
12. 删除确认提示
13. 状态标识显示
14. 时间格式化显示
15. 用户状态管理（启用/禁用）
16. 分页显示
17. 排序功能

---

### 二、模块管理模块（20项功能）

#### 后端功能（11项）
1. 创建模块
2. 查询所有模块
3. 根据ID查询模块
4. 分页查询模块
5. 根据状态查询模块
6. 更新模块信息
7. 删除模块
8. 创建原始数据（通过模块接口）
9. 更新原始数据（通过模块接口）
10. 删除原始数据（通过模块接口）
11. 根据模块ID查询原始数据
12. 获取组合数据（模块+原始数据）

#### 前端功能（8项）
13. 模块列表展示
14. 搜索功能（按名称、状态）
15. 新增/编辑模块弹窗
16. 批量删除功能
17. 状态切换功能
18. 分页显示
19. 排序功能
20. 状态标识显示

---

### 三、原始数据管理模块（27项功能）

#### 后端功能（8项）
1. 保存原始数据
2. 查询所有原始数据
3. 根据ID查询原始数据
4. 根据数据类型查询
5. 查询未处理数据
6. 根据时间范围查询
7. 标记数据为已处理
8. 统计数据类型数量

#### 数据处理功能（3项）
9. 数据版本管理
10. 结构化内容存储（JSON格式）
11. 删除原始数据

#### 自动解码功能（8项）
12. 自动ID识别
13. 自动ID解码
14. 地理码解析
15. 时间信息解析
16. 来源信息解析
17. 载体类型解析
18. 灾情信息解析
19. 完整描述生成

#### 前端功能（8项）
20. 原始数据列表展示
21. 新增原始数据
22. 未处理数据筛选
23. 标记已处理功能
24. 数据内容截断显示
25. 状态标识显示
26. 时间格式化显示
27. 数据类型筛选

---

### 四、处理数据管理模块（19项功能）

#### 后端功能（10项）
1. 创建处理数据
2. 查询所有处理数据
3. 根据ID查询处理数据
4. 根据处理类型查询
5. 根据原始数据ID查询
6. 查询最小置信度数据
7. 查询置信度范围数据
8. 根据字段搜索
9. 更新置信度分数
10. 删除处理数据

#### 高级功能（4项）
11. 置信度评估（0-1范围）
12. 处理内容存储（JSON格式）
13. 元数据存储
14. 置信度分数更新

#### 前端功能（5项）
15. 处理数据列表展示
16. 新增处理数据
17. 更新置信度功能
18. 置信度可视化（高/中/低）
19. 删除处理数据（带确认）

---

### 五、日志数据管理模块（18项功能）

#### 后端功能（8项）
1. 创建日志数据
2. 查询所有日志数据
3. 根据ID查询日志数据
4. 分页查询日志
5. 根据日志级别查询
6. 根据时间范围查询
7. 删除日志数据
8. 统计日志级别数量

#### 高级功能（3项）
9. 多级别日志支持（INFO、WARN、ERROR、DEBUG）
10. 元数据存储（JSON格式）
11. 时间戳管理

#### 前端功能（7项）
12. 日志列表展示
13. 按级别筛选
14. 级别标识显示（不同颜色标签和行背景）
15. 新增日志功能
16. 删除日志功能（带确认）
17. 时间格式化显示
18. 元数据展示

---

### 六、文件管理模块（20项功能）

#### 后端功能（13项）
1. 文件上传（支持多种格式，最大500MB）
2. 文件下载
3. 文件预览
4. 根据ID查询文件
5. 查询所有文件
6. 根据文件类型查询
7. 根据关联数据查询
8. 根据用户查询
9. 删除文件
10. 更新文件信息
11. 获取文件URL
12. 文件访问
13. 文件统计

#### 高级功能（3项）
14. 文件元数据管理
15. 文件访问控制
16. 文件关联管理

#### 前端功能（4项）
17. 文件列表展示（表格/卡片）
18. 文件上传界面（拖拽上传）
19. 文件预览功能
20. 文件类型筛选

---

### 七、数据看板模块（15项功能）

#### 后端功能（7项）
1. 获取看板数据
2. 获取数据统计
3. 获取文件统计
4. 获取最近活动
5. 获取图表数据
6. 获取数据类型分布
7. 获取趋势图表

#### 前端功能（8项）
8. 数据看板首页
9. 统计卡片展示
10. 饼图展示（数据类型分布、处理状态分布）
11. 折线图展示（数据趋势）
12. 柱状图展示（数据来源分布）
13. 图表交互（缩放、筛选、时间范围选择）
14. 实时更新
15. 响应式布局

---

### 八、灾情解码模块（25项功能）

#### ID解码功能（3项）
1. 单个ID解码
2. 批量ID解码
3. ID格式验证

#### 地理信息解析功能（4项）
4. 地理码定位（12位地理码层级解析）
5. 逆地理编码（经纬度→地址）
6. 地理编码（地址→经纬度）
7. 行政区划查询

#### 文件解码功能（4项）
8. 文件名解码
9. 批量文件名解码
10. Excel内容解码
11. 自动ID检测

#### 解码结果信息（7项）
12. 震情码解析（26位：12位地理码+14位时间码）
13. 来源码解析（来源大类、子类）
14. 载体码解析（文字、图像、音频、视频）
15. 灾情码解析（灾害大类、子类、指标）
16. 完整描述生成
17. 时间信息解析
18. 地理信息解析

#### 前端功能（7项）
19. ID解码界面
20. 批量解码界面
21. 文件解码界面
22. 地理定位界面
23. 解码结果展示（描述列表）
24. 标签页布局
25. 结果表格展示

---

### 九、灾情数据查询模块（16项功能）

#### 多维度查询功能（6项）
1. 按灾害大类查询
2. 按灾害子类查询
3. 按来源查询
4. 按载体类型查询
5. 按地理码查询
6. 按时间范围查询

#### 综合查询功能（2项）
7. 多条件组合查询
8. 数据详情查询（包含解码信息）

#### 前端功能（8项）
9. 搜索条件栏
10. 数据列表展示
11. 数据详情查看
12. 分页功能
13. 筛选条件组合
14. 时间范围选择器
15. 数据表格展示
16. 详情弹窗展示

---

### 十、灾情数据处理模块（8项功能）

#### 自动解码处理功能（3项）
1. 自动ID识别
2. 自动解码更新
3. 批量处理

#### 数据处理功能（3项）
4. 单个数据处理
5. 批量数据处理
6. 根据ID字符串处理

#### 处理结果（2项）
7. 解码字段更新
8. 描述生成

---

### 十一、存储策略模块（15项功能）

#### 策略管理功能（4项）
1. 创建存储策略
2. 更新存储策略
3. 删除存储策略
4. 查询存储策略

#### 策略查询功能（2项）
5. 根据数据类型查询
6. 查询活跃策略

#### 策略配置项（7项）
7. 策略名称
8. 数据类型
9. 存储类型
10. 保留天数
11. 最大存储大小
12. 清理规则
13. 策略状态

#### 前端功能（2项）
14. 策略列表展示
15. 新增/编辑策略界面

---

### 十二、数据淘汰模块（10项功能）

#### 数据淘汰功能（4项）
1. 原始数据淘汰
2. 处理数据淘汰
3. 全部数据淘汰
4. 按策略淘汰

#### 淘汰策略（3项）
5. 时间淘汰
6. 保留天数淘汰
7. 策略淘汰

#### 前端功能（3项）
8. 淘汰操作界面
9. 淘汰结果展示
10. 淘汰策略配置

---

### 十三、地图可视化模块（18项功能）

#### 地图数据接口（5项）
1. 灾情点位数据
2. 区域统计数据
3. 聚合点位数据
4. 时间轴数据
5. 地图概览统计

#### 地图可视化功能（5项）
6. 点位标注
7. 聚合显示
8. 热力图显示
9. 信息窗口
10. 图例显示

#### 前端界面功能（8项）
11. 地图容器（高德地图集成）
12. 筛选工具栏
13. 视图模式切换（点位/聚合/热力）
14. 信息面板
15. 图例面板
16. 地图交互
17. 点位点击事件
18. 地图缩放控制

---

### 十四、系统基础设施功能（35项功能）

#### 数据库支持（4项）
1. MySQL数据库（结构化数据存储）
2. MongoDB数据库（非结构化数据存储）
3. 双数据库配置（自动配置和连接管理）
4. 数据库初始化脚本

#### 后端API功能（6项）
5. RESTful API设计
6. 统一响应格式（Result类）
7. 全局异常处理
8. CORS跨域支持
9. 分页支持（Spring Data）
10. 时间格式处理（ISO格式）

#### 前端功能（9项）
11. Vue 3框架（Composition API）
12. Vue Router路由
13. 响应式布局
14. API统一管理（axios）
15. Mock数据支持
16. 错误提示机制
17. 加载状态显示
18. Element Plus UI组件库
19. ECharts图表库

#### 部署功能（4项）
20. Docker支持（Dockerfile）
21. Docker Compose编排
22. Nginx反向代理配置
23. 环境配置切换（开发/生产）

#### 技术特性（8项）
24. Spring Boot 2.7
25. Spring Data JPA（MySQL）
26. Spring Data MongoDB
27. Lombok代码简化
28. Vite构建工具
29. 统一异常处理机制
30. RestTemplate（HTTP客户端）
31. Apache POI（Excel处理）

#### 第三方集成（4项）
32. 高德地图Web服务API
33. 高德地图JS API
34. 地理编码服务
35. 行政区划查询服务

---

## 接口统计（110个RESTful API）

### 用户管理接口（8个）
1. POST /api/users - 创建用户
2. GET /api/users - 查询所有用户
3. GET /api/users/{id} - 根据ID查询用户
4. GET /api/users/username/{username} - 根据用户名查询
5. GET /api/users/page - 分页查询用户
6. PUT /api/users/{id} - 更新用户
7. DELETE /api/users/{id} - 删除用户
8. GET /api/users/check-username - 检查用户名是否存在

### 模块管理接口（11个）
9. POST /api/modules - 创建模块
10. GET /api/modules - 分页查询模块
11. GET /api/modules/{id} - 根据ID查询模块
12. GET /api/modules/status/{status} - 根据状态查询模块
13. PUT /api/modules/{id} - 更新模块
14. DELETE /api/modules/{id} - 删除模块
15. POST /api/modules/raw-data - 创建原始数据
16. PUT /api/modules/raw-data/{id} - 更新原始数据
17. DELETE /api/modules/raw-data/{id} - 删除原始数据
18. GET /api/modules/{moduleId}/raw-data - 根据模块ID查询原始数据
19. GET /api/modules/{moduleId}/combined - 获取组合数据

### 原始数据接口（8个）
20. POST /api/raw-data - 保存原始数据
21. GET /api/raw-data - 查询所有原始数据
22. GET /api/raw-data/{id} - 根据ID查询
23. GET /api/raw-data/type/{dataType} - 根据数据类型查询
24. GET /api/raw-data/unprocessed - 查询未处理数据
25. GET /api/raw-data/time-range - 根据时间范围查询
26. PUT /api/raw-data/{id}/processed - 标记为已处理
27. GET /api/raw-data/count/{dataType} - 统计数据类型数量

### 处理数据接口（10个）
28. POST /api/processed-data - 创建处理数据
29. GET /api/processed-data - 查询所有处理数据
30. GET /api/processed-data/{id} - 根据ID查询
31. GET /api/processed-data/type/{processType} - 根据处理类型查询
32. GET /api/processed-data/raw-data/{rawDataId} - 根据原始数据ID查询
33. GET /api/processed-data/confidence/min/{minScore} - 查询最小置信度数据
34. GET /api/processed-data/confidence/range - 查询置信度范围数据
35. GET /api/processed-data/search/field - 根据字段搜索
36. PUT /api/processed-data/{id}/confidence - 更新置信度分数
37. DELETE /api/processed-data/{id} - 删除处理数据

### 日志数据接口（8个）
38. POST /api/log-data - 创建日志数据
39. GET /api/log-data - 查询所有日志数据
40. GET /api/log-data/{id} - 根据ID查询
41. GET /api/log-data/page - 分页查询日志
42. GET /api/log-data/level/{level} - 根据日志级别查询
43. GET /api/log-data/time-range - 根据时间范围查询
44. DELETE /api/log-data/{id} - 删除日志数据
45. GET /api/log-data/count/level/{level} - 统计日志级别数量

### 文件管理接口（13个）
46. POST /api/files/upload - 上传文件
47. GET /api/files/{id} - 根据ID查询文件
48. GET /api/files - 查询所有文件
49. GET /api/files/type/{fileType} - 根据文件类型查询
50. GET /api/files/related - 根据关联数据查询
51. GET /api/files/user/{userId} - 根据用户查询
52. DELETE /api/files/{id} - 删除文件
53. PUT /api/files/{id} - 更新文件信息
54. GET /api/files/{id}/download - 下载文件
55. GET /api/files/{id}/preview - 预览文件
56. GET /api/files/{id}/url - 获取文件URL
57. GET /api/files/{id}/access - 访问文件
58. GET /api/files/statistics - 文件统计

### 数据看板接口（7个）
59. GET /api/dashboard - 获取看板数据
60. GET /api/dashboard/statistics - 获取数据统计
61. GET /api/dashboard/files - 获取文件统计
62. GET /api/dashboard/activities - 获取最近活动
63. GET /api/dashboard/charts - 获取图表数据
64. GET /api/dashboard/charts/data-type-distribution - 获取数据类型分布
65. GET /api/dashboard/charts/trend - 获取趋势图表

### 灾情解码接口（15个）
66. GET /api/disaster-decode/decode/{id} - 解码单个ID
67. POST /api/disaster-decode/decode/batch - 批量解码ID
68. GET /api/disaster-decode/validate/{id} - 验证ID格式
69. GET /api/disaster-decode/geo/{geoCode} - 根据地理码获取位置
70. GET /api/disaster-decode/geo/locate/{geoCode} - 根据地理码定位
71. GET /api/disaster-decode/geo/reverse - 逆地理编码
72. POST /api/disaster-decode/file/decode-filename - 解码文件名
73. POST /api/disaster-decode/file/decode-filenames/batch - 批量解码文件名
74. POST /api/disaster-decode/file/decode-excel - 解码Excel内容
75. POST /api/disaster-decode/file/decode-excel/path - 从路径解码Excel
76. GET /api/disaster-decode/file/decodable-files - 获取可解码文件列表
77. GET /api/disaster-decode/file/excel-files - 获取Excel文件列表
78. GET /api/disaster-decode/file/decode-by-id/{fileId} - 根据文件ID解码
79. POST /api/disaster-decode/file/decode-by-ids - 批量根据文件ID解码
80. GET /api/disaster-decode/file/decode-excel-by-id/{fileId} - 根据文件ID解码Excel

### 灾情数据查询接口（8个）
81. GET /api/disaster-data/category/{category} - 按灾害大类查询
82. GET /api/disaster-data/subcategory/{subcategory} - 按灾害子类查询
83. GET /api/disaster-data/source/{source} - 按来源查询
84. GET /api/disaster-data/carrier/{carrierType} - 按载体类型查询
85. GET /api/disaster-data/geo/{geoCode} - 按地理码查询
86. GET /api/disaster-data/time-range - 按时间范围查询
87. POST /api/disaster-data/query - 综合查询
88. GET /api/disaster-data/detail/{id} - 获取数据详情

### 灾情数据处理接口（3个）
89. POST /api/disaster-process/process - 处理并解码单个数据
90. POST /api/disaster-process/process/batch - 批量处理并解码
91. POST /api/disaster-process/process/by-id-string - 根据ID字符串处理

### 存储策略接口（7个）
92. POST /api/storage-strategy - 创建存储策略
93. PUT /api/storage-strategy/{id} - 更新存储策略
94. DELETE /api/storage-strategy/{id} - 删除存储策略
95. GET /api/storage-strategy/{id} - 根据ID查询策略
96. GET /api/storage-strategy - 查询所有策略
97. GET /api/storage-strategy/data-type/{dataType} - 根据数据类型查询
98. GET /api/storage-strategy/active - 查询活跃策略

### 数据淘汰接口（4个）
99. POST /api/data-eviction/raw-data - 淘汰原始数据
100. POST /api/data-eviction/processed-data - 淘汰处理数据
101. POST /api/data-eviction/all - 淘汰所有过期数据
102. POST /api/data-eviction/strategy/{dataType} - 按策略淘汰

### 地图可视化接口（5个）
103. GET /api/map/disaster-points - 获取灾情点位数据
104. GET /api/map/region-statistics - 获取区域统计数据
105. GET /api/map/cluster - 获取聚合点位数据
106. GET /api/map/timeline - 获取时间轴数据
107. GET /api/map/overview - 获取地图概览统计

---

## 数据模型

### MySQL数据表（3个）
1. user表 - 用户信息表（id, username, email, phone, status, create_time, update_time）
2. module_entity表 - 模块信息表（id, name, description, status, create_time, update_time）
3. storage_strategy表 - 存储策略表（id, strategy_name, data_type, storage_type, retention_days, max_size, cleanup_rule, status, create_time, update_time）

### MongoDB集合（4个）
4. raw_data集合 - 原始数据集合（包含基础字段和解码字段）
5. processed_data集合 - 处理数据集合（_id, raw_data_id, processed_content, process_type, confidence_score, metadata, create_time）
6. log_data集合 - 日志数据集合（_id, level, message, timestamp, metadata, create_time）
7. file_metadata集合 - 文件元数据集合（_id, original_name, file_name, file_path, file_size, mime_type, file_type, related_data_id, related_data_type, user_id, description, access_level, create_time, update_time）

---

## 前端页面（13个）

1. 数据看板页面 (`/dashboard`) - Dashboard.vue
2. 用户管理页面 (`/users`) - UserManagement.vue
3. 模块管理页面 (`/modules`) - ModuleManagement.vue
4. 原始数据管理页面 (`/raw-data`) - RawDataManagement.vue
5. 处理数据管理页面 (`/processed-data`) - ProcessedDataManagement.vue
6. 日志数据管理页面 (`/log-data`) - LogDataManagement.vue
7. 文件管理页面 (`/files`) - FileManagement.vue
8. 灾情解码页面 (`/disaster-decode`) - DisasterDecode.vue
9. 灾情查询页面 (`/disaster-data`) - DisasterData.vue
10. 存储策略页面 (`/storage-strategy`) - StorageStrategy.vue
11. 数据淘汰页面 (`/data-eviction`) - DataEviction.vue
12. 地图可视化页面 (`/map`) - MapVisualization.vue
13. 主应用页面 - App.vue（包含Layout布局和路由视图）

---

## 文档支持（4个）

1. README.md - 项目主文档（快速启动指南、项目结构、技术栈说明）
2. 接口测试文档.md - API接口测试文档（请求示例、数据库验证方法）
3. 数据库配置说明.md - 数据库配置详细说明文档
4. 灾情解码API文档.md - 灾情解码相关API的详细文档（编码规则、代码对照表、使用示例）

---

## 功能统计汇总

| 模块 | 功能项数 | 接口数 | 前端页面 |
|------|---------|-------|---------|
| 用户管理 | 17 | 8 | 1 |
| 模块管理 | 20 | 11 | 1 |
| 原始数据管理 | 27 | 8 | 1 |
| 处理数据管理 | 19 | 10 | 1 |
| 日志数据管理 | 18 | 8 | 1 |
| 文件管理 | 20 | 13 | 1 |
| 数据看板 | 15 | 7 | 1 |
| 灾情解码 | 25 | 15 | 1 |
| 灾情数据查询 | 16 | 8 | 1 |
| 灾情数据处理 | 8 | 3 | 0 |
| 存储策略 | 15 | 7 | 1 |
| 数据淘汰 | 10 | 4 | 1 |
| 地图可视化 | 18 | 5 | 1 |
| 系统基础设施 | 35 | - | - |
| 数据模型 | 7 | - | - |
| 前端页面 | 13 | - | 13 |
| 文档支持 | 4 | - | - |
| **总计** | **287** | **110** | **13** |

---

## 技术栈

### 后端
- Spring Boot 2.7
- Spring Data JPA（MySQL）
- Spring Data MongoDB
- Lombok
- Maven
- RestTemplate
- Apache POI

### 前端
- Vue 3（Composition API）
- Vue Router
- Axios
- Vite
- Element Plus
- ECharts
- 高德地图JS API

### 数据库
- MySQL 5.7+
- MongoDB 4.0+

### 部署
- Docker
- Docker Compose
- Nginx

### 第三方服务
- 高德地图Web服务API
- 高德地图JS API

---

**文档生成时间**: 2025-01-XX  
**项目版本**: 1.0.0  
**维护者**: 开发团队
